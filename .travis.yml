sudo: false

language: python
python:
  - "2.7"

cache: pip

before_script:
  - npm install yuglify

script:
  - ./manage.py check
  - ./manage.py collectstatic --noinput
  - py.test -k "not unoconv" --cov=catalog --cov=documents --cov=notifications --cov=tags --cov=telepathy --cov=users --cov=www
  - make database

addons:
  apt:
    packages:
    - graphicsmagick
    # Unoconv is not supported on travis right now
    # but we do not run unoconv tests on travis so it's not a problem
    # - unoconv
    - python-dev
    - nodejs
    - npm

notifications:
  email:
    on_success: change
    on_failure: change

after_success: coveralls
