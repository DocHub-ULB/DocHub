{% extends "base.html" %}
{% block title %}Uploader{% endblock %}
{% block content %}
<div class="content">

    <div style="grid-column-start: 2;margin-top:1em">
        {% if READ_ONLY %}
        <br>
        <div data-alert class="alert-box warning radius">
            DocHub est en maintenance, vous ne pouvez pas uploader de documents pour l'instant.
            Cela devrait être résolu dans quelques heures, renvenez bientôt ! :)
            <a href="#" class="close">&times;</a>
        </div>
        {% endif %}

        <h1 style="font-weight: normal;">Uploader <small style="font-size: 60%;font-weight:200;">{{course.name}}</small></h1>
        {% comment %} <div class="delimiter" style="width: 100%"></div> {% endcomment %}

        <form action="{% url 'document_put' course.slug %}" method="post" enctype="multipart/form-data" class="dropzone" id="document-upload" style="margin: 1em">
            {% csrf_token %}
            {{ form.non_field_errors }}
            <p>Vous pouvez uploader à peu près n'importe quel type de document. DocHub accepte les pdf, jpg, png,
                doc(x), ppt(x), odt, et bien plus encore.<br>
                Complétez une brève description du document afin d'aider tout le monde à trouver les informations plus
                efficacement. Vous pourrez encore les éditer plus tard s'il le faut.</p>

            {% with form.file as field %}
            {% if field.errors %}
            <small class="error">
                {% for error in field.errors %}
                {{error}}<br />
                {% endfor %}
            </small>
            {% endif %}
            <div class="panel callout drop-panel">
                {{field}}
            </div>
            {% endwith %}

            <div style="display:grid;grid-template-rows: max-content;">
                {% with form.name as field %}
                {% include "simple_input.html" %}
                {% endwith %}
                {% with form.tags as field %}
                {% include "simple_input.html" %}
                {% endwith %}
                {% with form.description as field %}
                {% include "simple_input.html" %}
                {% endwith %}
            </div>

            <p class="text-right">
                <br>
                <input type="submit" class="button green {% if READ_ONLY %}disabled{% endif %}"
                    value="Upload" />
            </p>
        </form>


    </div>
</div>
{% endblock %}

{% block script %}
<script>
    $(document).ready(function () {
        $(".chosen-select").select2({
            'placeholder': "Tags"
        });
    });
</script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
{% endblock %}