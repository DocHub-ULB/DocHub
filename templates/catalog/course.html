{% extends "skel.html" %}
{% load render_bundle from webpack_loader %}

{% load humanize %}
{% load custommardown %}
{% load activity_tags %}
{% load has_perm_on %}

{% block title %}{{ course.slug|upper }}{% endblock %}

{% block header %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;1,200;1,300;1,400&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}

<div style="display: grid; grid-template-columns: 1fr 65% 1fr 25% 1fr;margin-top: 1.5em;">
    <div style="grid-column-start: 2;">
        <h1 class="ml-8" style="; font-family: Titillium Web; font-style: normal; font-weight: normal; font-size: 32px; line-height: 49px;">
            {{ course.slug|upper }} {{ course.name }}
            {% if request.user|is_following:course %}
            <i class="fi-check green"></i>
            {% endif %}
            {% if followers_count > 1 %}
            <small>{{followers_count}} personnes sont abonnées à ce cours.</small>
            {% endif %}
        </h1>
        <h2 class="ml-12" style="grid-row-start: 2;">Chargement en cours...</h2>

        <div class="ml-12" style="display: grid; grid-auto-rows: auto;">
            <div class="card">
                <div clas="card-title">
                    <a style="color: #008CBA; font-family: Titillium Web; font-style: normal; font-weight: normal; font-size: 22px; line-height: 33px;">Projet 2017 — Satisfactions de Contraintes et Utilisation de l’Outil Choco solve</a>
                    <span>Olivier Pirson</span>
                </div>
                <span class="ml-4" style="font-family: Titillium Web;font-style: italic;font-weight: 300;font-size: 14px;line-height: 21px;">Toutes les sources sur Bitbucket : https://bitbucket.org/OPiMedia/chocochess/</span>
                <div class="card-footers">
                    <span>8 pages</span>
                    <span>31 May 2016</span>
                    <div class="labels">
                        <span style="background: #7BB109; color:white;">tp</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mx-auto" style="grid-column-start: 4;margin-top: .5em;">
        <a href="{% url 'document_put' course.slug %}" class="button green">
            <i class="fi-plus"></i>
            Uploader un fichier
        </a>
        {% if request.user|is_following:course %}
        <a href="{% url 'leave_course' course.slug %}" class="button radius info tiny">
            <i class="fi-x"></i> Se désabonner
        </a>
        {% else %}
        <a href="{% url 'join_course' course.slug %}" class="button blue">
            <i class="fi-check"></i> S’abonner au cours
        </a>
        {% endif %}

    </div>
</div>
{% endblock %}


{% block script %}
<script type="text/javascript">
    $(document).ready(function () {
        var dest = 'documents';
        var doc_id = $('#' + dest).attr('data-id');
        $.get(Urls['course-detail'](doc_id), function (data) {
            loadCourseViewer(dest, data);
        });
    })
</script>
{% endblock %}