{% extends "base.html" %}

{% load static %}

{% block header %}
  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
{% endblock %}

{# hide the search bar on the home page #}
{% block navbar %}
    {% with hide_search=True %}
        {% include "navbar.html" %}
    {% endwith %}
{% endblock %}

{% block content %}
    {% comment %} {% if request.user.welcome %}
        {% include "welcome.html" %}
    {% endif %} {% endcomment %}
    <div class="home-grid">
        <div class="home-search-container">
            <div style="margin-bottom: 1em;text-align: center;">
                <span class="logo-home">Doc</span><span class="logo-home" style="color:#007095;">Hub</span>
            </div>
            {% include "search/frames/search-box.html" with initial=True %}
            <div style="width: 100%;text-align:center;margin-top: 2em;">
                <button onclick="location='#'" class="mdc-button mdc-button--raised" style="--mdc-theme-primary: #009ACD;--mdc-theme-on-primary: var(--mdc-theme-text-primary-on-dark);">
                    <span class="mdc-button__ripple"></span>
                    <span class="mdc-button__label">Chercher</span>
                </button>
            </div>
        </div>
        <div style="grid-column-start: 2;grid-row-start: 2;text-align: center;height: 30vh">
            <hr style="color: #eee;width: 50%;">
            <h1>Mes Cours</h1>
            {% if following_course %}
                <div class="followed-course-grid">
                    {% for course in following_course %}
                        <a href="{% url "catalog:course_show" course.slug %}">
                            <div style="padding-left: 0.5em;padding-right: 0.5em">
                                <div style="padding:0.75em;background-color: #00445A20;border-radius: 1em;">
                                    <i class="fas fa-folder" style="margin-right: 5px;color: #009ACD;"></i> {{ course.name }}
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <span style="font-family: Roboto;font-style: normal;font-weight: bold;"> Vous pouvez parcourir les differents cours <a href="{% url 'catalog:show_courses' %}" style="color: -webkit-link;text-decoration: underline;">ici</a></span>
            {% endif %}
            {% comment %} 
            <turbo-frame id="facs" class="turbo-overflow" src="{% url "catalog:finder_turbo" "facs" "root" %}">
            </turbo-frame>
            <turbo-frame id="programs" class="turbo-overflow">
            </turbo-frame>
            <turbo-frame id="blocs" class="turbo-overflow">
            </turbo-frame>
            <turbo-frame id="courses" class="turbo-overflow">
            </turbo-frame> {% endcomment %}
        </div>
    </div>

    <!-- Cours -->
    {% comment %} {% if request.user.following_courses|length > 0 %}
    <div class="row">
        <div class="large-6 columns">
            <h3>Mes cours</h3>
            <ul class="no-list">
                {% for course in request.user.following_courses %}
                <li class="nav-link">
                    <a href="{% url 'course_show' course.slug %}">
                        <span class="course-label success radius label fixed-label">
                            {{ course.slug }}
                        </span>
                        {{ course.name|truncatechars:40 }}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %} {% endcomment %}

{% endblock %}

{% block script %}
    <script src="{% static "home.js" %}"></script>
    <script>
    const buttons = document.querySelectorAll('.mdc-button');
    for (const button of buttons) {
        mdc.ripple.MDCRipple.attachTo(button);
    }
    </script>
{% endblock %}
